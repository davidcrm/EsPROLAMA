{% extends 'admin_panel/base.html' %}
{% load static %}

{% block content %}

    <div class="container mt-5">
        <h1>
            {% if principio %}Editar{% else %}Nuevo{% endif %} Principio
        </h1>
        <hr>
        <form method="post">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="btn btn-outline-success">
                {% if principio %}Guardar cambios{% else %}Crear principio{% endif %}
            </button>

            {% if principio %}
                <!-- Botón para abrir el modal de eliminar -->
                <button type="button" class="btn btn-outline-danger" data-bs-toggle="modal"
                        data-bs-target="#confirmarEliminarModal">
                    Eliminar principio
                </button>
            {% endif %}
        </form>

        <!-- Modal de confirmación para eliminar -->
        {% if principio %}
            <div class="modal fade" id="confirmarEliminarModal" tabindex="-1"
                 aria-labelledby="confirmarEliminarModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <form method="post" action="{% url 'admin_panel:eliminar_principio' principio.id %}">
                            {% csrf_token %}
                            <div class="modal-header">
                                <h5 class="modal-title" id="confirmarEliminarModalLabel">Confirmar eliminación</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Cerrar"></button>
                            </div>
                            <div class="modal-body">
                                ¿Estás seguro de que quieres eliminar el principio
                                "<strong>{{ principio.titulo }}</strong>"?
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar
                                </button>
                                <button type="submit" class="btn btn-danger">Eliminar</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        {% endif %}
    </div>

{% endblock %}
